def search_client_lists_by_name(session, base_url, keyword):
    url = urljoin(base_url, "/client-list/v1/lists?includeDeprecated=true&includeDeleted=true")

    response = session.get(url)
    if not response.ok:
        raise Exception(f"[ERROR] {response.status_code}: {response.text}")

    client_lists = response.json().get("content", [])

    keyword_lower = keyword.lower()
    matches = []

    for cl in client_lists:
        list_id = cl.get("listId", "no id")
        name = cl.get("name", "") or cl.get("groupName", "")
        name_lower = name.lower()

        is_deprecated = cl.get("deprecated", False)
        if keyword_lower in name_lower:
            if not is_deprecated:
                matches.append((list_id, name))
            else:
                print(f"[DEBUG] Skipping deprecated client list match: {name} (listId: {list_id})")

    if not matches:
        print(f"[WARN] No active matches found for: {keyword}")

    return matches
