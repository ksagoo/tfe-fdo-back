def update_config_metadata(output_path, config_name, contract_id, group_id, access_group, hostnames, description, default_policies):
    metadata = {
        "configuration_name": config_name,
        "contract_id": contract_id,
        "group_id": group_id,
        "access_group": access_group,
        "hostnames": hostnames,
        "description": description,
        "default_policies": default_policies
    }

    output_file = os.path.join(output_path, "config_metadata.json")
    with open(output_file, "w") as f:
        json.dump(metadata, f, indent=2)
    print(f"[INFO] Updated metadata written to: {output_file}")


update_config_metadata(
    output_path=args.output_dir,
    config_name=config_name,
    contract_id=contract_id,
    group_id=group_id,
    access_group=args.access_group,
    hostnames=hostnames,
    description=description,
    default_policies={
        "prod": {
            "name": prod_policy_name,
            "prefix": "Prod",
            "policyId": prod_policy_id
        },
        "nonprod": {
            "name": nonprod_policy_name,
            "prefix": "NonP",
            "policyId": nonprod_policy_id
        }
    }
)
