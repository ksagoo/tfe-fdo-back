rendered = render_template(env, "match_targets.j2", {"target": target})
try:
    target_obj = json.loads(rendered)
    if isinstance(target_obj, dict):
        rendered_targets.append(target_obj)
    else:
        print("[ERROR] Rendered target is not a dictionary. Skipping.")
except Exception as e:
    print(f"[ERROR] Failed to parse rendered target: {e}")
