def find_network_list_ids_by_substring(session, base_url, substring):
    """
    Finds network lists where the name contains the given substring (case-insensitive).
    Prints debug output. Returns list of {name, id}.
    """
    from urllib.parse import urljoin

    url = urljoin(base_url, "/network-list/v2/network-lists")
    resp = session.get(url)
    if not resp.ok:
        raise Exception(f"Failed to list network lists: {resp.status_code} - {resp.text}")

    data = resp.json()
    if "networkLists" not in data:
        raise Exception("Expected 'networkLists' key in response, got: " + json.dumps(data))

    matched_lists = []

    for entry in data["networkLists"]:
        # Each entry has: name, uniqueId
        name = entry.get("name", "")
        unique_id = entry.get("uniqueId")
        if substring.lower() in name.lower():
            print(f"[MATCH] Name: {name}, ID: {unique_id}")
            matched_lists.append({
                "name": name,
                "id": unique_id
            })

    if not matched_lists:
        print(f"[INFO] No network lists found containing: '{substring}'")

    return matched_lists
