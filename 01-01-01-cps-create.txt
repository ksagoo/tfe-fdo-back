"""
=====================================================
           Akamai Certificate Lifecycle Automation
=====================================================

Description:
Automates the complete lifecycle of Akamai CPS (Certificate Provisioning System)
certificates, including discovery, renewal, deployment, polling, and escalation
notifications. Designed for seamless integration with Jenkins pipelines and
Jira Front Door workflows.

Key Capabilities:
- Automated certificate renewal and deployment through CPS API (v2)
- Discovery of all enrollments or filtered expiry-based lists
- Safe dry-run simulation (no live API calls)
- Configurable polling with timeout and exponential backoff
- Automatic HTML email rendering via Jinja2 templates (7/10/14-day)
- Region-aware contract and group ID mapping (Global, APAC, EMEA, LATAM, AMER, DEV)
- Unified structured console output ([INFO], [DEBUG], [SUCCESS], [FAILURE])
- JSON and HTML output for audit and CI/CD visibility
- Section-aware EdgeGrid authentication (.edgerc)
- Compatible with Jenkins and GitLab pipeline triggers

Recent Updates:
- Added `--expiry-threshold` for filtered discovery by expiry date
- Extended dry-run simulation for full workflow validation
- Added `--json-only` and `--no-email` flags for CI/CD optimization
- Enhanced polling logic with time-based and iteration-based control
- Added detailed summary.json reporting for Jenkins pipeline parsing
- Improved error handling and uniform logging across dry-run and live modes
- Introduced staging/scheduled deployment support via `--schedule-time` and
  `--deployment-network` flags

Usage:
  python akamai_cert_manager.py \
    --section <SECTION> \
    --access_group <ACCESS_GROUP> \
    [--fqdn <FQDN>] \
    [--enrollment_id <ENROLLMENT_ID>] \
    [--action <get_enrollment|renew_only|deploy_only|renew_and_deploy>] \
    [--expiry-threshold <DAYS>] \
    [--deployment-network <production|staging>] \
    [--schedule-time <ISO_TIMESTAMP>] \
    [--dry-run] [--debug] [--json-only] [--no-email]

Requirements:
- Python 3.8 or later
- Valid Akamai EdgeGrid credentials (.edgerc) with CPS API access

Created: October 2025
Last Updated: October 2025 (polling, expiry filtering, JSON mode, dry-run)
License: Internal use only â€“ HSBC / Akamai Automation Team
=====================================================
"""
