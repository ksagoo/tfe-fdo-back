def setup_session(edgerc_file, section_name, debug=False):
    """
    Initialize EdgeGrid-authenticated session using .edgerc credentials.
    """

    try:
        import configparser, os
        from akamai.edgegrid import EdgeGridAuth
        import requests

        edgerc_path = os.path.expanduser(edgerc_file)
        if not os.path.exists(edgerc_path):
            print(f"[FAILURE]: .edgerc file not found at {edgerc_path}")
            return None, None

        config = configparser.ConfigParser()
        config.read(edgerc_path)

        if not config.has_section(section_name):
            print(f"[FAILURE]: Section [{section_name}] not found in .edgerc. Available sections: {config.sections()}")
            return None, None

        client_token = config.get(section_name, "client_token")
        client_secret = config.get(section_name, "client_secret")
        access_token = config.get(section_name, "access_token")
        host = config.get(section_name, "host")

        base_url = f"https://{host}"

        session = requests.Session()
        session.auth = EdgeGridAuth(
            client_token=client_token,
            client_secret=client_secret,
            access_token=access_token
        )
        session.headers.update({"Content-Type": "application/json"})

        if debug:
            print(f"[DEBUG]: EdgeGrid session initialized for host: {base_url}")

        return session, base_url

    except Exception as e:
        print(f"[FAILURE]: EdgeGrid init error: {e}")
        return None, None
